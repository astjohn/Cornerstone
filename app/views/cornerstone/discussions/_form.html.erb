<%= form_for(@discussion) do |f| %>
  <%= render :partial => 'cornerstone/shared/errors',
             :locals => {:rails_model => @discussion} %>

  <div class="field">
    <%= f.label "Private" %><%= f.check_box :privte %>
  </div>
  <div class="field">
    <%= f.label :category %><br />
    <%= f.collection_select :category_id, @categories, :id, :name,
                                          :prompt => "Please select a category" %>
  </div>
  <div class="field">
    <%= f.label :subject %><br />
    <%= f.text_field :subject %>
  </div>


  <%= f.fields_for :posts do |p| %>
    <% unless current_cornerstone_user %>
      <div class="field">
        <%= p.label :name %>
        <%= p.text_field :name %>
      </div>
      <div class="field">
        <%= p.label :email %>
        <%= p.email_field :email %>
      </div>
    <% end %>
    <div class="field">
      <%= p.text_area :body %>
    </div>
  <% end %>

  <div class="actions">
    <%= f.submit %>
  </div>

<% end %>

